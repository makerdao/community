# 清算

## 清算とは？

もし CDP が安全でないと見なされる場合は CDP を清算することになります。この仕組みによって、発行されている Dai の価値を保証するのに十分な担保がシステムに確保されます。清算は、CDP の担保が、必要量を下回った場合（オラクルによって判断される）に実行されます。清算プロセスでは、債務（発行された Dai）と手数料（Stability Fee）をカバーするのに十分な担保がシステムによって差し押さえられ、残りはユーザーの手元に残ります。

## なぜ清算プロセスが存在するのか？

政府によって価値が担保される多くの法定通貨とは異なり、Dai はモダンかつ暗号学的に安全が保証されたステーブルコインの一つです。流通している全ての Dai はスマートコントラクトに余分に担保されたトークンの価値に支えられているため、信頼性が確保され、かつカウンターパーティーリスクを排除することができています。この完全な透明性は、ユーザーがシステムを信頼し続ける理由となります。

#＃ だれが清算を行うのか？

担保として余剰に保管されているトークンを確認するため、Keeper と呼ばれるユーザーが安全性に問題があったり、担保不足になる可能性のある CDP を常に監視して報酬を得ています。この Keeper は Dai ステーブルコインシステムの中で特別なカテゴリーです。Keeper はシステムの中にまだ Dai の担保が確実に残っており、支払い能力があることを確実にすることによって、インセンティブを得ています。

Keeper は担保率の低い高リスクな CDP ができるだけ早く清算されるようにすることで、エコシステムの安全性を保っています。この機能は特に、債務不履行の可能性が高まる仮想通貨市場の急落時に重要になります。

## 清算率とは？

各担保には、特定の資産ごとのリスクプロファイルに基づいて決められた、清算率が設定されています。現在 MakerDao で使われている担保の種類は ETH のみです。単一担保型 Dai（SCD = Single Collateralized Dai）を開始した際に、Maker の暫定リスクチームは ETH 資産のリスクプロファイルを実施し、適切な清算率は 150％だと決定しました。

分散型のオラクルは、特定の CDP の担保率がいつシステム清算率を下回るのかを検知するために、ETH 価格データをシステムに対して提供します。このリスクプロファイルと、分散型オラクルによって決められた市場価格の両方を使って、清算率を定義します。

例えば、あるユーザーが 200Dai を引き出したい場合、担保の価値が現在の市場価格の 50％を下回ることはないと考えたとします。そしてユーザーは最小担保額の 2 倍を担保として預け入れると決めます。すると、最小の担保として必要な金額は Dai に対して 150％になるので、このユーザーは\$600 分の ETH を預け入れ、代わりに 200Dai を引き出すということになり、CDP の担保は 300%になります。

**ETH を担保資産とした CDP が Keeper により清算される最低担保率が 150%ということを覚えておくことは重要です。**ユーザーがこの最小レベル以上の担保を保っておくことで、Keeper によって清算されるのを防ぐことができます。

## 清算価格とは？

清算価格は、担保資産が清算される最低価格です。

## 清算ペナルティとは？

これは清算が発生したときに合計債務（Dai）に加算される手数料であり、保有している CDP の担保から差し引かれます。

ペナルティの金額からの収入は PETH プールに送られます。これにより、ユーザーが CDP から担保資産を引き出した際に受け取る WETH の比率が高まります。この手数料は、例えば市場が不安定で清算が多く行われている時に、担保プールの価値を高めることに繋がります。

## 清算時のメカニズムは？

Keeper が CDP をクローズしてそれを清算提供コントラクト（LPC）に送信すると、CDP の担保資産が[Dai Dashboard](https://dai.makerdao.com)上に売りに出されます。清算が完了すると、売れ残った PETH は CDP の所有者に返却されます。

この処理は以下のように行われます。

- 債務不履行になった CDP がクローズされます。
- ペナルティの手数料が Dai の債務に追加されます。
- LPC が現在のオラクルの価格を使って、債務を返済するのに十分な PETH 担保を取り除きます。
- CDP の所有者はクローズされたポジションから残りの担保を取得することができます。
- 差し押さえられた PETH は[Dai Dashboard]()で[Boom/Bust Spread](http://glossary/)（ブーム・バストスプレッド）と呼ばれる割引を適用されて売りに出されます。
- PETH の販売によって得られた Dai は CDP の債務としてバーンされます。
- 販売によって余剰な Dai が回収された場合には、その Dai を売却することで PETH 回収し、さらにその回収した PETH をバーンすることで、残った PETH の価値を増加させます。
- 売却による Dai の回収が不十分な場合、不足分を補うために PETH の発行と売却が行われます。これによってプールの合計金額を希釈します。

## 清算が行われた後はいくら担保が残るのか？

以下の単純化された式を使って、清算後にあなたがどれだけの担保を保有しているのかを判定することができます。

`(担保 * オラクル価格 * PETH/ETH 比率) - (清算ペナルティ * 安定債務) - 安定債務 = (残りの担保 * オラクル価格) DAI`

例えばこのような値を仮定として使い、式を使って計算してみましょう。

- 1ETH のオラクル価格は 350USD です
- ロックされた PETH の合計は 10ETH です
- PETH / ETH の比率は 1.012 です。
- 清算ペナルティは 13％です
- CDP の安定債務は 1000Dai です

`(10 × 350 × 1.012) − (13% × 1000) − 1000 = 2412 DAI or 6.891428571 ETH`

## 清算価格はどのように計算するのか？

以下の単純化された式を使って、どのくらい資産が下がると清算が開始されるかを計算する事ができます。

`(安定債務 * 清算率) / (担保 * PETH/ETH 比率) = 清算価格`

例えばこのような値を仮定として使い、式を使って計算してみましょう。

- 1ETH の価値は 350USD です
- 預け入れられた PETH は 12 です。
- PETH / ETH の比率は 1.012 です
- 清算率は 150%です
- 安定債務は 1000Dai です

`(1000 × 1.5 ) ÷ (12 × 1.012) = 123.51 USD`

CDP が安全でないとみなされ清算されるリスクが生じる前に、ETH の価格を 123.51 USD まで下がる必要があります。

## 担保率はどのように計算するのか？

清算価格ではなく、債務に対する担保の比率を調べてポジションの健全性を判断したい場合は、この単純化された式によって計算することができます。

`(ロックされたPETH × ETH価格 × PETH/ETH 比率) ÷ 安定債務 × 100 = 担保率`

例えばこのような値を仮定として使い、式を使って計算してみましょう。

- 1 ETH の価値は 350USD です
- 預け入れられた PETH は 12 です。
- PETH / ETH の比率は 1.012 です
- 安定債務は 1000Dai です

`(12 × 350 × 1.012) ÷ 1000 × 100 = 425.04%`

CDP の担保率は 425.04％になります。

## 清算価格を下げるにはどうするのか？

CDP の所有者が直面する主な課題は、非常に予測が難しい市場の中でいかに安全でレバレッジをかけたポジションを維持できるかです。もし CDP が清算価格に近い場合は、担保を追加するか Dai を返済することで、そのリスクを軽減することができます。

どちらの選択肢が良いかはあなたの長期的な目標によって変わってきます。もしあなたが裏付された担保の将来価値をしっかりと信じているのであれば、あなたは担保を追加するかもしれません。または、もしあなたが価格の変動に対してリスクを減らしたいなら、あなたは Dai を CDP に返済することによって債務を返済することもできます。

清算のリスクを下げる最善の方法は、Dai を返済することです。これによって清算価格をとても効率的に下げることができます。この方法はあなたが CDP を持っていることで発生する手数料の額を減らすという利点もあります。

例えばこのような値を仮定として使い、式を使って計算してみましょう。

- 1ETH の価値は 350USD です
- 預け入れられた PETH は 12 です。
- PETH / ETH の比率は 1.012 です
- 清算率は 150%です
- 安定債務は 1000Dai です

現在の清算価格:

`(1000 × 1.5 ) ÷ (12 × 1.012) = 123.51 USD`

700USD 相当の担保の**追加**による清算価格の変更:

`(1000 × 1.5 ) ÷ (14 × 1.012) = 105.87 USD`

700USD 相当の債務を**除く**ことによる清算価格の変動:

`(300 × 1.5 ) ÷ (12 × 1.012) = 37.05 USD`

この結果を見ると、担保を追加するのではなく、Dai を返済することで清算価格が大幅に引き下げられることがわかります。

## 清算を回避する方法

あなたの CDP の健全性を保ち続けるのは**ユーザーの責任**です。資産が清算されずに安全に保たれるのは完全に各 CDP ユーザーのコントロールによります。ここでは、ユーザーが CDP の健全性を監視するために推奨している一般的な方法を紹介します。

- お気に入りのアプリ、または複数のアプリで価格アラートを設定して、市場の予期しない出来事を回避すること。
- CDP の管理に使用する資産に必ずいつでもアクセスできるようにしておくこと。市場がクラッシュした場合、資産にアクセスできないことで困らないようにすること。
- 今のポジションに追加できるように、十分な資産を持っておくこと。もしくは債務を減らすために、追加の資産で Dai を買えるようにしておくこと。
- 市場の低迷が続く可能性がある場合は、CDP から担保の余剰分を引き出すことができます。この余剰分で Dai を買い、その Dai で債務を返済することができます。_この戦略は、Dai で債務を返し終えるまでの間、一時的なリスクがあるので、清算価格から余裕がある範囲で実施できているかを確認してください。_

CDP を開くことには、リスクがあるということを忘れないでください。ユーザーがどの程度のリスクを取れるかは様々な要因によって変わってきます。ユーザーに取っての[リスクプロファイル](https://www.investopedia.com/terms/r/risk-profile.asp)を決めるのは非常に難しいことですが、すべての CDP ユーザーが自分で決定しなければならないことです。

リスクの詳細については、重要な法的情報が載っている[利用規約](https://cdp.makerdao.com/terms)を参照してください。すべての CDP ユーザーは、Dai Stablecoin システムを使用する前に利用規約に同意する必要があります。

## スマートコントラクトはどのように担保を売却するのか？

Keeper が安全でない CDP を清算すると、清算提供コントラクト（LPC）が担保を Dai Dashboard 上で販売します。この販売価格は、調整が加えられたオラクルによって決定されます。この調整は一般的には割引の形を取り、回収されなければならない債務（Dai）に適用されます。
この追加の「スプレッド」は、担保購入者に市場価格よりも良い価格を提供することにより、システムが素早く資本の増強をできるように設計されています。

ユーザーは、LPC に押収された PETH をダッシュボード上で購入することができます。売却によって生じた余分な Dai はすべて PETH で購入できます。

## 押収された PETH は購入できるのか？

はい。Dai ダッシュボードには、ブーム・バストスプレッドによって決定された割引で押収された PETH を市場参加者が購入できる「Total Liquidity Available from forced CDP Liquidations」というセクションがあります。

## 「フラッシュクラッシュ（暴落）」は CDP の清算にどのように影響するのか？

1 つの取引所でフラッシュクラッシュが起きても、オラクルは多くの取引所の価格を集計しているため、システムに影響はありません。オラクルによってデータが収集されると、これらの個々の情報の中央値を計算します。<https://mkr.tools/system/feeds>で各オラクルの全てのグラフを見ることができます。

- 詳細な情報：https://developer.makerdao.com/feeds/
- 価格情報取得部分のコード：[https://github.com/makerdao/price-feed](https://github.com/makerdao/price-feed)
- メディアナイザーのコード：[https://github.com/makerdao/medianizer](https://github.com/makerdao/medianizer)
- アップデーターのコード：[https://github.com/makerdao/setzer](https://github.com/makerdao/setzer)
- フィードのモニタリング：
  [https://mkr.tools/system/feeds](https://mkr.tools/system/feeds)

## 清算に関する最新情報はどこで見ることができるのか？

MakerDAO システムの情報を追跡している、第三者のツール[mkr.tools](https://mkr.tools/)で調べることができます。

mkr.tools の中で最も関連性の高いページは[清算](https://mkr.tools/system/liquidations)と[バイト](https://mkr.tools/system/bites)です。
